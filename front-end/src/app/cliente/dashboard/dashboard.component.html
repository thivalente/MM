<div class="dashboard" ngxUiLoaderBlurred [loaderId]="'loader-principal'">
    <div class="row header">
        <h4>Dashboard</h4>
    </div>
    
    <perfect-scrollbar>
        <div class="body-container">
            <div class="cards col-md-12">
                <div class="row panel panel-default">
                    <div class="col text-center">
                        <i class="fa fa-usd text-primary"></i>
                        <h4>Saldo Hoje</h4>
                        <small>{{ cards?.hoje | currency:'R$ ':true }}</small>
                    </div>
                    <div class="col text-center">
                        <i class="fa fa-line-chart text-success" aria-hidden="true"></i>
                        <h4>Em 90 Dias</h4>
                        <small>{{ cards?.primeiro | currency:'R$ ':true }}</small>
                    </div>
                    <div class="col text-center">
                        <i class="fa fa-angle-double-up text-success" aria-hidden="true"></i>
                        <h4>Em 180 Dias</h4>
                        <small>{{ cards?.segundo | currency:'R$ ':true }}</small>
                    </div>
                </div>
            </div>
            <div class="dados row col-md-12">
                <div class="chart col-md-8">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3>Rendimento Mensal</h3>
                        </div>
                        <div class="panel-body">
                            <perfect-scrollbar>
                                <div class="chart-container">
                                    <canvas baseChart
                                    [datasets]="lineChartData"
                                    [labels]="lineChartLabels"
                                    [chartType]="lineChartType"
                                    [options]="lineChartOptions"
                                    ></canvas>
                                </div>
                            </perfect-scrollbar>
                        </div>
                    </div>
                </div>
                <div class="extrato col-md-4">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3>Extrato</h3>
                        </div>
                        <ngb-tabset [destroyOnHide]="false">
                            <ngb-tab>
                                <ng-template ngbTabTitle>
                                    <span class="tab-label-content">Histórico</span>
                                </ng-template>
                                <ng-template ngbTabContent>
                                    <fieldset class="historico">
                                        <legend>
                                            Seu saldo em conta é de: <span class="text-success">{{ saldo | currency:'R$ ':true }}</span>
                                        </legend>
                                        <perfect-scrollbar>
                                            <table class="table table-borderless">
                                                <tbody>
                                                    <tr *ngFor="let extrato of extratos | periodoHistoricoFilter | periodoCabecalhoFilter" [ngClass]="extrato.cabecalho ? 'table-row-header' : ''">
                                                        <td *ngIf="extrato.cabecalho" colspan="3">
                                                            <span>{{ extrato.data }}</span>
                                                        </td>
                                                        <td *ngIf="!extrato.cabecalho">
                                                            <i class="fa" [ngClass]="extrato.entrada ? (extrato.rendimento ? 'fa-usd text-success' : 'fa-arrow-up text-success') : 'fa-arrow-down text-danger'"></i>
                                                        </td>
                                                        <td *ngIf="!extrato.cabecalho">{{ extrato.entrada ? (extrato.rendimento ? 'Rendimento' : 'Aporte') : 'Retirada' }}</td>
                                                        <td *ngIf="!extrato.cabecalho" class="text-right"><span [ngClass]="extrato.entrada ? 'text-success' : 'text-danger'">{{ extrato.valor | currency:'R$ ':true }}</span></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </perfect-scrollbar>
                                    </fieldset>
                                </ng-template>
                            </ngb-tab>
                            <ngb-tab>
                                <ng-template ngbTabTitle>
                                    <span class="tab-label-content">Mensal</span>
                                </ng-template>
                                <ng-template ngbTabContent>
                                    <fieldset class="mensal">
                                        <legend>
                                            <div class="form-group row">
                                                <label class="col-sm-4 col-form-label">Filtrar por: </label>
                                                <div class="col-sm-8">
                                                    <select class="form-control btn-sm" [(ngModel)]="periodoSelecionado">
                                                        <optgroup *ngFor='let grp of listaPeriodos' label="{{ grp.ano }}">
                                                            <option *ngFor='let mes of grp.meses' [value]="mes.ano_mes">{{mes.nome}}</option> 
                                                        </optgroup>
                                                    </select>
                                                </div>
                                            </div>
                                        </legend>
                                        <perfect-scrollbar>
                                            <table class="table table-borderless">
                                                <tbody>
                                                    <tr *ngFor="let extrato of extratos | periodoPorMesFilter:periodoSelecionado | periodoCabecalhoFilter" [ngClass]="extrato.cabecalho ? 'table-row-header' : ''">
                                                        <td *ngIf="extrato.cabecalho" colspan="3">
                                                            <span>{{ extrato.data }}</span>
                                                        </td>
                                                        <td *ngIf="!extrato.cabecalho">
                                                            <i class="fa" [ngClass]="extrato.entrada ? (extrato.rendimento ? 'fa-usd text-success' : 'fa-arrow-up text-success') : 'fa-arrow-down text-danger'"></i>
                                                        </td>
                                                        <td *ngIf="!extrato.cabecalho">{{ extrato.entrada ? (extrato.rendimento ? 'Rendimento' : 'Aporte') : 'Retirada' }}</td>
                                                        <td *ngIf="!extrato.cabecalho" class="text-right"><span [ngClass]="extrato.entrada ? 'text-success' : 'text-danger'">{{ extrato.valor | currency:'R$ ':true }}</span></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </perfect-scrollbar>
                                    </fieldset>
                                </ng-template>
                            </ngb-tab>
                        </ngb-tabset>
                    </div>
                </div>
            </div>
        </div>
    </perfect-scrollbar>
</div>
<ngx-ui-loader [loaderId]="'loader-principal'" [hasProgressBar]="true"></ngx-ui-loader>